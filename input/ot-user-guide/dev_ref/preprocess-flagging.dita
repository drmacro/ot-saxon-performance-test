<?xml version="1.0" encoding="utf-8"?><?workdir /Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/temp/xhtml/dev_ref?><?workdir-uri file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/temp/xhtml/dev_ref/?><?path2project ../?><?path2project-uri ../?><?doctype-public -//OASIS//DTD DITA Reference//EN?><?doctype-system reference.dtd?><reference xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" xmlns:dita-ot="http://dita-ot.sourceforge.net/ns/201007/dita-ot" id="flagging" rev="1.7" xml:lang="en-US" ditaarch:DITAArchVersion="1.3" domains="(topic reference)                            (topic abbrev-d)                            a(props deliveryTarget)                            (topic equation-d)                            (topic hazard-d)                            (topic hi-d)                            (topic indexing-d)                            (topic markup-d)                            (topic mathml-d)                            (topic pr-d)                            (topic relmgmt-d)                            (topic sw-d)                            (topic svg-d)                            (topic ui-d)                            (topic ut-d)                            (topic markup-d xml-d)   " class="- topic/topic       reference/reference " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="reference:1;5:53">
  <title class="- topic/title " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="title:1;6:10">Flagging in the toolkit</title>
  <shortdesc class="- topic/shortdesc " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="shortdesc:1;7:14">Beginning with DITA-OT 1.7, flagging support is implemented as a common preprocess module. The module
    evaluates the DITAVAL against all flagging attributes, and adds DITA-OTâ€“specific hints to the topic when flags are
    active. Any extended transformation type may use these hints to support flagging without adding logic to interpret
    the DITAVAL.</shortdesc>
  <refbody class="- topic/body        reference/refbody " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="refbody:1;11:12">
    <section class="- topic/section " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="section:1;12:14">
      <title class="- topic/title " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="title:2;13:14">Evaluating the DITAVAL flags</title>
      <p class="- topic/p " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="p:1;14:10">Flagging is implemented as a reusable module during the preprocess stage. If a DITAVAL file is not used with a
        build, this step is skipped with no change to the file.</p>
      <p class="- topic/p " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="p:2;16:10">When a flag is active, relevant sections of the DITAVAL itself are copied into the topic as a sub-element of
        the current topic. The active flags are enclosed in a pseudo-specialization of the
          <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:1;18:23">foreign</xmlelement> element (referred to as a pseudo-specialization because it is used only under
        the covers, with all topic types; it is not integrated into any shipped document types).</p>
      <parml class="+ topic/dl pr-d/parml " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="parml:1;20:14">
        <plentry class="+ topic/dlentry pr-d/plentry " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="plentry:1;21:18">
          <pt class="+ topic/dt pr-d/pt " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="pt:1;22:15"><xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:2;22:27">ditaval-startprop</xmlelement></pt>
          <pd class="+ topic/dd pr-d/pd " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="pd:1;23:15">
            <p class="- topic/p " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="p:3;24:16">When any flag is active on an element, a <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:3;24:69">ditaval-startprop</xmlelement> element will be
              created as the first child of the flagged element:</p>
            <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="codeblock:1;26:24">&lt;ditaval-startprop class="+ topic/foreign ditaot-d/ditaval-startprop "&gt;</codeblock>
            <p class="- topic/p " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="p:4;27:16">The <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:4;27:32">ditaval-startprop</xmlelement> element will contain the following:<ul class="- topic/ul " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="ul:1;27:102">
                <li class="- topic/li " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="li:1;28:21">If the active flags should create a new style, that style is included using standard CSS markup on
                  the <xmlatt class="+ topic/keyword markup-d/markupname xml-d/xmlatt " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlatt:1;29:31">outputclass</xmlatt> attribute. Output types that make use of CSS, such as XHTML, can use
                  this value as-is.</li>
                <li class="- topic/li " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="li:2;31:21">If styles conflict, and a <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:5;31:59">style-conflict</xmlelement> element exists in the DITAVAL, it
                  will be copied as a child of <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:6;32:60">ditaval-startprop</xmlelement>.</li>
                <li class="- topic/li " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="li:3;33:21">Any <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:7;33:37">prop</xmlelement> or <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:8;33:70">revprop</xmlelement> elements that define active
                  flags will be copied in as children of the <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:9;34:74">ditaval-startprop</xmlelement> element. Any
                    <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:10;35:33">startflag</xmlelement> children of the properties will be included, but
                    <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:11;36:33">endflag</xmlelement> children will not.</li>
              </ul>
            </p>
          </pd>
        </plentry>
        <plentry class="+ topic/dlentry pr-d/plentry " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="plentry:2;41:18">
          <pt class="+ topic/dt pr-d/pt " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="pt:2;42:15"><xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:12;42:27">ditaval-endprop</xmlelement></pt>
          <pd class="+ topic/dd pr-d/pd " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="pd:2;43:15">
            <p class="- topic/p " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="p:5;44:16">When any flag is active on an element, a <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:13;44:69">ditaval-endprop</xmlelement> element will be created
              as the last child of the flagged element:</p>
            <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="codeblock:2;46:24">&lt;ditaval-endprop class="+ topic/foreign ditaot-d/ditaval-endprop "&gt;</codeblock>
            <p class="- topic/p " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="p:6;47:16">CSS values and <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:14;47:43">style-conflict</xmlelement> elements are not included on this element.</p>
            <p class="- topic/p " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="p:7;48:16">Any <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:15;48:32">prop</xmlelement> or <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:16;48:65">revprop</xmlelement> elements that define active flags
              will be copied in as children of <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:17;49:60">ditaval-prop</xmlelement>. Any
                <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:18;50:29">startflag</xmlelement> children of the properties will be included, but
                <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:19;51:29">endflag</xmlelement> children will not.</p>
          </pd>
        </plentry>
      </parml>
    </section>
    <section class="- topic/section " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="section:2;56:14">
      <title class="- topic/title " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="title:3;57:14">Supporting flags in overrides or custom transformation types</title>
      <p class="- topic/p " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="p:8;58:10">For most transformation types, the <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:20;58:57">foreign</xmlelement> element should be ignored by default,
        because arbitrary non-DITA content may not mix well unless coded for ahead of time. If the
          <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:21;60:23">foreign</xmlelement> element is ignored by default, or if a rule is added to specifically ignore
          <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:22;61:23">ditaval-startprop</xmlelement> and <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:23;61:70">ditaval-endprop</xmlelement>, then the added
        elements will have no impact on a transform. If desired, flagging support may be integrated at any time in the
        future.</p>
      <p class="- topic/p " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="p:9;64:10">The processing described above runs as part of the common preprocess, so any transform that uses the default
        preprocess will get the topic updates. To support generating flags as images, XSLT based transforms can use
        default fallthrough processing in most cases. For example, if a paragraph is flagged, the first child of
          <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:24;67:23">p</xmlelement> will contain the start flag information; adding a rule to handle images in
          <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:25;68:23">ditaval-startprop</xmlelement> will cause the image to appear at the start of the paragraph
        content.</p>
      <p class="- topic/p " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="p:10;70:10">In some cases fallthrough processing will not result in valid output; for those cases, the flags must be
        explicitly processed. This is done in the XHTML transform for elements like <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:26;71:97">ol</xmlelement>, because
        fallthrough processing would place images in between <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:27;72:74">ol</xmlelement> and
        <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:28;73:21">li</xmlelement>. To handle this, the code processes <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:29;73:85">ditaval-startprop</xmlelement>
        before starting the element, and <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:30;74:54">ditaval-endprop</xmlelement> at the end. Fallthrough processing is
        then disabled for those elements as children of <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:31;75:69">ol</xmlelement>.</p></section>
    <example class="- topic/example " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="example:1;76:14">
      <title class="- topic/title " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="title:4;77:14">Example DITAVAL</title>
      <p class="- topic/p " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="p:11;78:10">Assume the following DITAVAL file is in use during a build. This DITAVAL will be used for each of the following
        content examples.</p>
      <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="codeblock:3;80:18">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;val&gt;
  &lt;!-- Define what happens in the case of conflicting styles --&gt;
  &lt;style-conflict background-conflict-color="red"/&gt;

  &lt;!-- Define two flagging properties that give styles (no image) --&gt;
  &lt;prop action="flag" att="audience" style="underline" val="user" backcolor="green"/&gt;
  &lt;prop action="flag" att="platform" style="overline" val="win" backcolor="blue"/&gt;

  &lt;!-- Define a property that includes start and end image flags --&gt;
  &lt;prop action="flag" att="platform" val="linux" style="overline" backcolor="blue"&gt;
    &lt;startflag imageref="startlin.png"&gt;&lt;alt-text&gt;Start linux&lt;/alt-text&gt;&lt;/startflag&gt;
    &lt;endflag imageref="endlin.png"&gt;&lt;alt-text&gt;End linux&lt;/alt-text&gt;&lt;/endflag&gt;
  &lt;/prop&gt;

  &lt;!-- Define a revision that includes start and end image flags --&gt;
  &lt;revprop action="flag" style="double-underline" val="rev2"&gt;
    &lt;startflag imageref="start_rev.gif"&gt;&lt;alt-text&gt;ssssssssssstart&lt;/alt-text&gt;&lt;/startflag&gt;
    &lt;endflag imageref="end_rev.gif"&gt;&lt;alt-text&gt;eeeeeeeeeeeeeend&lt;/alt-text&gt;&lt;/endflag&gt;
  &lt;/revprop&gt;
&lt;/val&gt;</codeblock>
    </example>
    <example class="- topic/example " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="example:2;102:14">
      <title class="- topic/title " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="title:5;103:14">Content example 1: Adding style</title>
      <p class="- topic/p " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="p:12;104:10">Now assume the following paragraph exists in a topic. Class attributes are included, as they would normally be
        in the middle of the preprocess routine; <xmlatt class="+ topic/keyword markup-d/markupname xml-d/xmlatt " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlatt:2;105:58">xtrf</xmlatt> and <xmlatt class="+ topic/keyword markup-d/markupname xml-d/xmlatt " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlatt:3;105:84">xtrc</xmlatt> are left off for
        clarity.</p>
      <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="codeblock:4;107:18">&lt;p audience="user"&gt;Simple user; includes style but no images&lt;/p&gt;
</codeblock>
      <p class="- topic/p " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="p:13;109:10">Based on the DITAVAL above, audience="user" results in a style with underlining and with a green background.
        The interpreted CSS value is added to <xmlatt class="+ topic/keyword markup-d/markupname xml-d/xmlatt " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlatt:4;110:55">outputclass</xmlatt> on
        <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:32;111:21">ditaval-startprop</xmlelement>, and the actual property definition is included at the start and end
        of the element. The output from the flagging step looks like this (with newlines added for clarity, and class
        attributes added as they would appear in the temporary file):</p>
      <p class="- topic/p " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="p:14;114:10">The resulting file after the flagging step looks like this; for clarity, newlines are added, while
          <xmlatt class="+ topic/keyword markup-d/markupname xml-d/xmlatt " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlatt:5;115:19">xtrf</xmlatt> and <xmlatt class="+ topic/keyword markup-d/markupname xml-d/xmlatt " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlatt:6;115:45">xtrc</xmlatt> are removed:</p>
      <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="codeblock:5;116:18">&lt;p audience="user" class="- topic/p "&gt;
  <b class="+ topic/ph hi-d/b " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="b:1;117:6">&lt;ditaval-startprop class="+ topic/foreign ditaot-d/ditaval-startprop " 
           outputclass="background-color:green;text-decoration:underline;"&gt;
    &lt;prop action="flag" att="audience" style="underline" val="user" backcolor="green"/&gt;
  &lt;/ditaval-startprop&gt;</b>
  Simple user; includes style but no images
  <b class="+ topic/ph hi-d/b " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="b:2;122:6">&lt;ditaval-endprop class="+ topic/foreign ditaot-d/ditaval-endprop "&gt;
    &lt;prop action="flag" att="audience" style="underline" val="user" backcolor="green"/&gt;
  &lt;/ditaval-endprop&gt;</b>
&lt;/p&gt;</codeblock>
    </example>
    <example class="- topic/example " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="example:3;127:14">
      <title class="- topic/title " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="title:6;128:14">Content example 2: Conflicting styles</title>
      <p class="- topic/p " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="p:15;129:10">This example includes a paragraph with conflicting styles. When the audience and platform attributes are both
        evaluated, the DITAVAL indicates that the background color is both green and blue. In this situation, the
          <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:33;131:23">style-conflict</xmlelement> element is evaluated to determine how to style the content.</p>
      <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="codeblock:6;132:18">&lt;p audience="user" platform="win"&gt;Conflicting styles (still no images)&lt;/p&gt;</codeblock>
      <p class="- topic/p " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="p:16;133:10">The <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:34;133:26">style-conflict</xmlelement> element results in a background color of red, so this value is
        added to <xmlatt class="+ topic/keyword markup-d/markupname xml-d/xmlatt " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlatt:7;134:26">outputclass</xmlatt> on <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:35;134:62">ditaval-startprop</xmlelement>. As above, active properties
        are copied into the generated elements; the <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:36;135:65">style-conflict</xmlelement> element itself is also
        copied into the generated <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:37;136:47">ditaval-startprop</xmlelement> element.</p>
      <p class="- topic/p " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="p:17;137:10">The resulting file after the flagging step looks like this; for clarity, newlines are added, while
          <xmlatt class="+ topic/keyword markup-d/markupname xml-d/xmlatt " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlatt:8;138:19">xtrf</xmlatt> and <xmlatt class="+ topic/keyword markup-d/markupname xml-d/xmlatt " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlatt:9;138:45">xtrc</xmlatt> are removed:</p>
      <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="codeblock:7;139:18">&lt;p audience="user" platform="win" class="- topic/p "&gt;
  <b class="+ topic/ph hi-d/b " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="b:3;140:6">&lt;ditaval-startprop class="+ topic/foreign ditaot-d/ditaval-startprop " 
           outputclass="background-color:red;"&gt;
    &lt;style-conflict background-conflict-color="red"/&gt;
    &lt;prop action="flag" att="audience" style="underline" val="user" backcolor="green"/&gt;
    &lt;prop action="flag" att="platform" style="overline" val="win" backcolor="blue"/&gt;
  &lt;/ditaval-startprop&gt;</b>
  Conflicting styles (still no images)
  <b class="+ topic/ph hi-d/b " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="b:4;147:6">&lt;ditaval-endprop class="+ topic/foreign ditaot-d/ditaval-endprop "&gt;
    &lt;prop action="flag" att="platform" style="overline" val="win" backcolor="blue"/&gt;
    &lt;prop action="flag" att="audience" style="underline" val="user" backcolor="green"/&gt;
  &lt;/ditaval-endprop&gt;</b>
&lt;/p&gt;</codeblock>
    </example>
    <example class="- topic/example " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="example:4;153:14">
      <title class="- topic/title " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="title:7;154:14">Content example 3: Adding image flags</title>
      <p class="- topic/p " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="p:18;155:10">This example includes image flags for both <xmlatt class="+ topic/keyword markup-d/markupname xml-d/xmlatt " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlatt:10;155:61">platform</xmlatt> and <xmlatt class="+ topic/keyword markup-d/markupname xml-d/xmlatt " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlatt:11;155:91">rev</xmlatt>, which are
        defined in DITAVAL <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:38;156:40">prop</xmlelement> and <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:39;156:74">revprop</xmlelement> elements.</p>
      <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="codeblock:8;157:18">&lt;ol platform="linux" rev="rev2"&gt;
  &lt;li&gt;Generate images for platform="linux" and rev="2"&lt;/li&gt;
&lt;/ol&gt;</codeblock>
      <p class="- topic/p " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="p:19;160:10">As above, the <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:40;160:36">ditaval-startprop</xmlelement> and <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:41;160:83">ditaval-endprop</xmlelement> nest the
        active property definitions, with the calculated CSS value on <xmlatt class="+ topic/keyword markup-d/markupname xml-d/xmlatt " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlatt:12;161:79">outputclass</xmlatt>. The
          <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:42;162:23">ditaval-startprop</xmlelement> drops the ending image, and
          <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:43;163:23">ditaval-endprop</xmlelement> drops the starting image. To make document-order processing more
        consistent, property flags are always included before revisions in <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:44;164:88">ditaval-startprop</xmlelement>,
        and the order is reversed for <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlelement:45;165:51">ditaval-endprop</xmlelement>.</p>
      <p class="- topic/p " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="p:20;166:10">The resulting file after the flagging step looks like this; for clarity, newlines are added, while
          <xmlatt class="+ topic/keyword markup-d/markupname xml-d/xmlatt " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlatt:13;167:19">xtrf</xmlatt> and <xmlatt class="+ topic/keyword markup-d/markupname xml-d/xmlatt " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="xmlatt:14;167:45">xtrc</xmlatt> are removed:</p>
      <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="codeblock:9;168:18">&lt;ol platform="linux" rev="rev2" class="- topic/ol "&gt;
  <b class="+ topic/ph hi-d/b " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="b:5;169:6">&lt;ditaval-startprop class="+ topic/foreign ditaot-d/ditaval-startprop " 
           outputclass="background-color:blue;text-decoration:underline;text-decoration:overline;"&gt;
    &lt;prop action="flag" att="platform" val="linux" style="overline" backcolor="blue"&gt;
      &lt;startflag imageref="startlin.png"&gt;&lt;alt-text&gt;Start linux&lt;/alt-text&gt;&lt;/startflag&gt;
    &lt;/prop&gt;
    &lt;revprop action="flag" style="double-underline" val="rev2"&gt;
      &lt;startflag imageref="start_rev.gif"&gt;&lt;alt-text&gt;ssssssssssstart&lt;/alt-text&gt;&lt;/startflag&gt;
    &lt;/revprop&gt;
  &lt;/ditaval-startprop&gt;</b>
  &lt;li class="- topic/li "&gt;Generate images for platform="linux" and rev="2"&lt;/li&gt;
  <b class="+ topic/ph hi-d/b " xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-flagging.dita" xtrc="b:6;179:6">&lt;ditaval-endprop class="+ topic/foreign ditaot-d/ditaval-endprop "&gt;
    &lt;revprop action="flag" style="double-underline" val="rev2"&gt;
      &lt;endflag imageref="end_rev.gif"&gt;&lt;alt-text&gt;eeeeeeeeeeeeeend&lt;/alt-text&gt;&lt;/endflag&gt;
    &lt;/revprop&gt;
    &lt;prop action="flag" att="platform" val="linux" style="overline" backcolor="blue"&gt;
      &lt;endflag imageref="endlin.png"&gt;&lt;alt-text&gt;End linux&lt;/alt-text&gt;&lt;/endflag&gt;
    &lt;/prop&gt;
  &lt;/ditaval-endprop&gt;</b>
&lt;/ol&gt;</codeblock>
    </example>
  </refbody>
<related-links class="- topic/related-links "><linkpool class="- topic/linkpool " xtrc="topicref:18;24:50" xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/dev_ref.ditamap"><link class="- topic/link " format="dita" href="../dev_ref/DITA-OTPreprocess.dita" mapclass="- map/topicref " role="parent" scope="local" type="concept" xtrc="topicref:5;11:122" xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/dev_ref.ditamap"><?ditaot usertext?><linktext class="- topic/linktext "><?ditaot gentext?>Pre-processing modules</linktext><?ditaot genshortdesc?><desc class="- topic/desc ">The pre-processing operation is a set of steps that typically runs at the beginning of every DITA-OT     transformation. Each step or stage corresponds to an Ant target in the build pipeline; the preprocess target calls     the entire set of steps.</desc></link><link class="- topic/link " format="dita" href="../dev_ref/preprocess-topicpull.dita" mapclass="- map/topicref " role="previous" scope="local" type="concept" xtrc="topicref:17;23:51" xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/dev_ref.ditamap"><?ditaot usertext?><linktext class="- topic/linktext "><?ditaot gentext?>Pull content into topics (topicpull)</linktext><?ditaot genshortdesc?><desc class="- topic/desc ">The <codeph class="+ topic/ph pr-d/codeph " xtrc="codeph:1;7:26" xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-topicpull.dita">topicpull</codeph> step pulls content into <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrc="xmlelement:1;7:81" xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-topicpull.dita">xref</xmlelement> and       <xmlelement class="+ topic/keyword markup-d/markupname xml-d/xmlelement " xtrc="xmlelement:2;8:19" xtrf="file:/Users/ekimber/workspace-ditaot/dita-ot-2.x/src/main/docsrc/dev_ref/preprocess-topicpull.dita">link</xmlelement> elements. This step is implemented in XSLT.</desc></link></linkpool></related-links></reference>